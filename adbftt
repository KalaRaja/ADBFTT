#!/bin/bash

setScreenParams() {
    tput clear
    tput civis
    PADDING=1
}

tearDown() {
    tput cnorm
}

getScreenDimensions() {
    ROWS=$(tput lines)
    COLS=$(tput cols)
}

function printInColor() {
    local color=0
    local text=$2

    if [[ $1 == 'green' ]]
    then
        color='\033[1;92m'
    elif [[ $1 == 'blue' ]]
    then
        color='\033[1;94m'
    else
        color='\033[0m'
    fi
    
    echo -ne $color$text'\033[0m'
}

drawBox() {
    local x=$1
    local y=$2
    local h=$3
    local w=$4
    local color=$5

    tput cup $x $y

    # top horizontal edge
    printInColor $color "+"
    for (( i = 1; i <= $w - 2; i++))
    do
        printInColor $color "-"
    done
    printInColor $color "+"

    tput cup $((x + 1)) $y

    # left vertical edge
    for (( i = 1; i <= $h - 2; i++))
    do
       printInColor $color "|"
       tput cup $((x + 1 + i)) $y
    done
    
    tput cup $((x + h - 1)) $y

    # bottom horizontal edge
    printInColor $color "+"
    for (( i = 1; i <= $w - 2; i++))
    do
        printInColor $color "-"
    done
    printInColor $color "+"

    tput cup $((x + 1)) $((y + w - 1))

    # right vertical edge
    for (( i = 1; i <= $h - 2; i++))
    do
       printInColor $color "|"
       tput cup $((x + 1 + i)) $((y + w - 1))
    done

}

initScreen() {
    local main_border_r=0
    local main_border_c=0

    drawBox $main_border_r $main_border_c $ROWS $COLS green

    # for some reason, no padding is required when computing rows
    LOCAL_FS_ROWS=$((ROWS - 2))
    REMOTE_FS_ROWS=$((ROWS - 2))

    LOCAL_FS_COLS=$(((COLS - PADDING - 2) / 2)) # account for left padding from main border, 2 vertical edges of main border
    REMOTE_FS_COLS=$(((COLS - PADDING - 2) / 2 - 1)) # account for left padding from main border, 2 vertical edges of main border and one middle padding

    # draw box for local fs
    # for some reason, no padding is required when computing rows
    drawBox $((main_border_r + 1)) $((main_border_c + PADDING + 1)) $LOCAL_FS_ROWS $LOCAL_FS_COLS "blue"

    # draw box for remote fs
    # for some reason, no padding is required when computing rows
    # start at the next column where local box ends + vertical padding
    drawBox $((main_border_r + 1)) $((LOCAL_FS_COLS + PADDING + 2)) $REMOTE_FS_ROWS $REMOTE_FS_COLS "blue"
}

setScreenParams
getScreenDimensions
initScreen

sleep 10